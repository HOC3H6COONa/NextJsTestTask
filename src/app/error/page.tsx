"use client";

import { useSearchParams, useRouter } from "next/navigation";

const errorMessages: Record<string, { title: string; description: string }> = {
    "connection": {
        title: "Нет интернет-соединения",
        description: "Проверьте wi-fi или мобильный интернет.",
    },
    "internal": {
        title: "Ведутся технические работы",
        description: "Пожалуйста, зайдите в приложение позже.",
    },
    "not-found": {
        title: "Страница \n не найдена",
        description: "Рекомендуем вернуться на главную и продолжить поиск.",
    },
};

export default function ErrorPage() {
    const searchParams = useSearchParams();
    const errorType = searchParams.get("error");

    const error = errorType && errorMessages[errorType]
        ? errorMessages[errorType]
        : {
            title: "Неизвестная ошибка",
            description: "Произошла неизвестная ошибка. Попробуйте позже.",
        };

    const getButtonMessage = () => {
        if (errorType === "connection") return "Повторить";
        if (errorType === "internal") return "Хорошо";
        return "На главную";
    };

    const router = useRouter();

    const handleClick = () => {
        router.push('/');
    };

    return (
        <div className="flex flex-col items-center justify-center min-h-screen px-6 py-12">
            <div className="flex flex-col flex-grow justify-center items-center text-center gap-[16px]">
                <div>
                    {errorType === "not-found" ?
                        <div>
                            <svg width="184" height="90" viewBox="0 0 184 90" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3.55327 61.7955V53.0767L25.4141 18.6364H32.9311V30.7045H28.4822L14.701 52.5142V52.9233H45.7663V61.7955H3.55327ZM28.6868 71V59.1364L28.8913 55.2756V18.6364H39.272V71H28.6868Z" fill="url(#paint0_linear_178_3242)"/>
                                <path d="M138.553 61.7955V53.0767L160.414 18.6364H167.931V30.7045H163.482L149.701 52.5142V52.9233H180.766V61.7955H138.553ZM163.687 71V59.1364L163.891 55.2756V18.6364H174.272V71H163.687Z" fill="url(#paint1_linear_178_3242)"/>
                                <path d="M65.5587 67.7162C60.0408 61.41 56.6728 53.1929 56.6728 44.1637C56.6728 24.4092 72.7487 8.33333 92.5031 8.33333C112.258 8.33333 128.333 24.4092 128.333 44.1637C128.333 63.9181 112.258 79.994 92.5031 79.994C83.4739 79.994 75.2568 76.626 68.9507 71.1081L60.7575 79.3013C60.2797 79.7552 59.6825 79.994 59.0615 79.994C58.4404 79.994 57.8433 79.7552 57.3655 79.3013C56.4339 78.3697 56.4339 76.8648 57.3655 75.9333L65.5587 67.7162ZM102.058 32.2202C99.4303 32.2202 97.2805 34.3701 97.2805 36.9976C97.2805 39.6252 99.4303 41.775 102.058 41.775C104.685 41.775 106.835 39.6252 106.835 36.9976C106.835 34.3701 104.685 32.2202 102.058 32.2202ZM80.5597 55.8922C80.8702 56.0355 81.2046 56.1071 81.5152 56.1071C82.4229 56.1071 83.3067 55.5816 83.7128 54.6739C85.2654 51.1864 88.729 48.9411 92.5031 48.9411C96.2773 48.9411 99.7409 51.1864 101.294 54.6978C101.819 55.8922 103.228 56.4654 104.447 55.916C105.641 55.3905 106.19 53.9812 105.665 52.763C103.348 47.5317 98.1643 44.1637 92.5031 44.1637C86.8419 44.1637 81.6585 47.5317 79.3654 52.7391C78.816 53.9573 79.3654 55.3666 80.5597 55.8922ZM82.9484 41.775C85.5759 41.775 87.7258 39.6252 87.7258 36.9976C87.7258 34.3701 85.5759 32.2202 82.9484 32.2202C80.3208 32.2202 78.171 34.3701 78.171 36.9976C78.171 39.6252 80.3208 41.775 82.9484 41.775Z" fill="url(#paint2_linear_178_3242)"/>
                                <defs>
                                    <linearGradient id="paint0_linear_178_3242" x1="49" y1="0" x2="11.915" y2="94.6676" gradientUnits="userSpaceOnUse">
                                        <stop stopColor="#FC3F1D"/>
                                        <stop offset="0.5" stopColor="#FC7A1D"/>
                                    </linearGradient>
                                    <linearGradient id="paint1_linear_178_3242" x1="184" y1="0" x2="146.915" y2="94.6676" gradientUnits="userSpaceOnUse">
                                        <stop stopColor="#FC3F1D"/>
                                        <stop offset="0.5" stopColor="#FC7A1D"/>
                                    </linearGradient>
                                    <linearGradient id="paint2_linear_178_3242" x1="56.6668" y1="8.33333" x2="74.4022" y2="91.4955" gradientUnits="userSpaceOnUse">
                                        <stop stopColor="#FC3F1D"/>
                                        <stop offset="0.5" stopColor="#FC7A1D"/>
                                    </linearGradient>
                                </defs>
                            </svg>

                        </div>
                        :
                        errorType === "connection" ?
                            <svg width="65" height="64" viewBox="0 0 65 64" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M46.793 3.625C55.2612 3.625 62.1258 10.4898 62.126 18.958V45.625C62.126 54.0934 55.2613 60.958 46.793 60.958H20.126C11.6578 60.9578 4.79297 54.0933 4.79297 45.625V18.958C4.79314 10.4899 11.6579 3.62518 20.126 3.625H46.793ZM45.6592 35.4648C45.2001 35.0059 44.4561 35.0058 43.9971 35.4648L41.5039 37.958L39.0107 35.4648C38.5518 35.0058 37.8077 35.0059 37.3486 35.4648C36.8896 35.9239 36.8896 36.6679 37.3486 37.127L39.8418 39.6201L37.3486 42.1143C36.8896 42.5733 36.8896 43.3173 37.3486 43.7764C37.8077 44.2352 38.5518 44.2354 39.0107 43.7764L41.5039 41.2832L43.9971 43.7764C44.456 44.2354 45.2001 44.2353 45.6592 43.7764C46.1182 43.3173 46.1182 42.5733 45.6592 42.1143L43.166 39.6201L45.6592 37.127C46.1182 36.6679 46.1182 35.9239 45.6592 35.4648ZM32.4951 34.2842C30.8059 34.2844 29.2171 34.9423 28.0225 36.1367C27.8578 36.3015 27.7656 36.5258 27.7656 36.7588C27.7657 36.9916 27.8579 37.2152 28.0225 37.3799L31.874 41.2314C32.0455 41.4029 32.2704 41.4891 32.4951 41.4893C32.7199 41.4893 32.9457 41.4029 33.1172 41.2314L34.3184 40.0293C34.1174 39.4299 34.0078 38.7882 34.0078 38.1211C34.0079 36.8942 34.3758 35.7531 35.0078 34.8027C34.2249 34.4638 33.3738 34.2842 32.4951 34.2842ZM32.5068 27.0205C28.8779 27.0207 25.4655 28.4338 22.8994 31C22.5565 31.3431 22.5566 31.8999 22.8994 32.2432L25.4668 34.8105C25.81 35.1537 26.3667 35.1535 26.71 34.8105C28.2584 33.2624 30.3173 32.4093 32.5068 32.4092C33.8702 32.4092 35.1831 32.7401 36.3535 33.3633C37.3654 32.585 38.6326 32.1212 40.0078 32.1211C40.6771 32.1211 41.3207 32.2323 41.9219 32.4346L42.1143 32.2432C42.4574 31.9 42.4574 31.3433 42.1143 31C39.5483 28.4339 36.1359 27.0205 32.5068 27.0205ZM32.5 19.7578C29.7926 19.7579 27.1524 20.2712 24.6543 21.2842C22.0676 22.3332 19.7467 23.8744 17.7568 25.8643C17.4139 26.2073 17.4141 26.7641 17.7568 27.1074L20.3242 29.6748C20.4888 29.8394 20.7126 29.9324 20.9453 29.9326C21.1783 29.9326 21.4026 29.8396 21.5674 29.6748C24.4874 26.7549 28.3706 25.1466 32.5 25.1465C36.6293 25.1466 40.5117 26.755 43.4316 29.6748C43.5963 29.8394 43.8199 29.9324 44.0527 29.9326C44.2857 29.9326 44.5101 29.8396 44.6748 29.6748L47.2422 27.1074C47.5855 26.7641 47.5854 26.2074 47.2422 25.8643C45.2523 23.8744 42.9314 22.3332 40.3447 21.2842C37.8468 20.2713 35.2071 19.7579 32.5 19.7578Z"
                                    fill="#F04438"/>
                            </svg>
                            :
                            <svg width="65" height="64" viewBox="0 0 65 64" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M46.793 3.625C55.2612 3.625 62.1258 10.4898 62.126 18.958V45.625C62.126 54.0934 55.2613 60.958 46.793 60.958H20.126C11.6578 60.9578 4.79297 54.0933 4.79297 45.625V18.958C4.79314 10.4899 11.6579 3.62518 20.126 3.625H46.793ZM33.3545 18C32.2097 18 31.0967 18.143 30.0332 18.4121C29.1654 18.6317 28.7165 19.3808 28.5723 20.0039C28.4015 20.742 27.9387 21.4077 27.2324 21.8154C26.5831 22.1903 25.8489 22.2778 25.1719 22.1182C24.5496 21.9714 23.6801 22.0412 23.0986 22.7197C22.0176 23.9814 21.165 25.446 20.6055 27.0488C20.2714 28.0057 20.7895 28.8671 21.3359 29.3174C21.9668 29.8371 22.3662 30.6217 22.3662 31.5C22.3662 32.3783 21.9668 33.1629 21.3359 33.6826C20.7895 34.1329 20.2714 34.9943 20.6055 35.9512C21.1649 37.5537 22.0178 39.0178 23.0986 40.2793C23.6801 40.958 24.5495 41.0276 25.1719 40.8809C25.8489 40.7213 26.5832 40.8097 27.2324 41.1846C27.9385 41.5923 28.4014 42.2571 28.5723 42.9951C28.7164 43.6183 29.1651 44.3682 30.0332 44.5879C31.0967 44.857 32.2097 45 33.3545 45C34.4994 45 35.6123 44.857 36.6758 44.5879C37.5438 44.3682 37.9916 43.6183 38.1357 42.9951C38.3065 42.257 38.7704 41.5923 39.4766 41.1846C40.1259 40.8097 40.86 40.7212 41.5371 40.8809C42.1594 41.0276 43.0289 40.958 43.6104 40.2793C44.6912 39.0178 45.5441 37.5537 46.1035 35.9512C46.4375 34.9944 45.9195 34.1329 45.373 33.6826C44.7423 33.1629 44.3428 32.3783 44.3428 31.5C44.3428 30.6217 44.7423 29.8371 45.373 29.3174C45.9195 28.8671 46.4375 28.0056 46.1035 27.0488C45.544 25.4461 44.6904 23.9823 43.6094 22.7207C43.0279 22.0422 42.1594 21.9715 41.5371 22.1182C40.8601 22.2778 40.1258 22.1902 39.4766 21.8154C38.7704 21.4077 38.3075 20.742 38.1367 20.0039C37.9925 19.3808 37.5436 18.6317 36.6758 18.4121C35.6123 18.143 34.4994 18 33.3545 18ZM33.3535 27.7344C35.4342 27.7344 37.1211 29.4213 37.1211 31.502C37.121 33.5826 35.4342 35.2695 33.3535 35.2695C31.2729 35.2694 29.586 33.5825 29.5859 31.502C29.5859 29.4213 31.2729 27.7345 33.3535 27.7344Z"
                                    fill="#F04438"/>
                            </svg>

                    }
                </div>
                <div className="flex flex-col gap-[12px]">
                    {errorType === "not-found"
                        ?
                        <h1 className="text-[32px] leading-[40px] font-[700] font-[Raleway] text-[#1B1822] uppercase">{error.title}</h1>
                        :
                        <h1 className="text-[20px] leading-[28px] font-[700] font-[Raleway] text-[#1B1822]">{error.title}</h1>
                    }
                    <p className="text-[15px] leading-[22px] font-[400] font-[Raleway] text-[#414651]">{error.description}</p>
                </div>
            </div>
            <button
                onClick={handleClick}
                className="mt-auto bg-[#FC3F1D] h-[42px] w-full p-[12px] rounded-[14px] text-[15px] leading-[22px] font-[500] font-[Raleway] text-[#FFFFFF] flex items-center justify-center">{getButtonMessage()}</button>
        </div>
    );
}